因为觉得自己做 $Ynoi$ 的思路很重要，而题解里面又不好写出来，所以特开个本子出来自闭。     

前面的题的话，思路都写在题解里了。

# Ynoi [五彩斑斓的世界](https://www.luogu.com.cn/problem/P4117)      

拿到这道题，第一反应：好难啊。(废话)     

既然是分块，那么我们就先分块，然后观察一下值域，发现值域这也太~~暗示~~了。所以先考虑把每个块里面做个值域分块，然后看能不能简化这个值域分块过程。     

发现我们如果对于每个值记录一下出现了多少次，那么我们每次就把一个区间一一对应往另一个区间里放，嘿这不就可以了吗>>？至于这个过程我们可以链表啊(脑抽到并查集)都想不到了。     

接着感觉这样玩的话我们根本没用起来这个值域，甚至一个块的操作就可以卡到 $O(1e5 + 1)$ ，所以考虑优化这个操作。     

发现我们一个块的最大值就一直在变小，所以我们可不可以从这里下手？    
每次我们往前面移的话，我们就把最大值往小缩，这不就好了？    

接着又想了想，发现这个优化也会被卡。比如说 $x = 1$ 一直出现，那我不就 $2 \sim Maxv$ 查一下， $Maxv - 1$ ？？？艹       

接着就不会了，点开了题解，太菜了，现在都没有一道 $Ynoi$ 完成度可以为 $100%$ 的题目。       

# Ynoi [初始化](https://www.luogu.com.cn/problem/P5309)   

很快就往阈值分治上面靠了，因为题目的暴力 $\sqrt n$ 操作很显然。         

接着就又捡了个 $y \leq x$ 的便宜，转成了 $id \mod x = y$ 的条件，就这样蜜汁感觉要做出来了？？？    

然后考虑了一下，觉得可以先用 $O(n \sqrt n)$ 暴力打出每种 $x$ 下 $\mod x$  的值，而由于每个数只会在 $x$ 固定的情况下只会对一种 $y$ 产生贡献，所以，所以，所以……艹不会维护了。      

有点慌，结果根本没发现 $add$ 操作有周期性，然后就开始想离线，分析每次查询我们肯定可以维护大块里面的情况(这个哪怕跑 $\sqrt n$ 都行)，重点在于两边的零散块怎么搞，发现死活搞不出来，利用答案累加性想离线下来做个空间时间 $O(\sqrt n)$ 的查询，然后每组查询用 ```x , y , id``` 表示下标为 $x$ 这个地方的数在第 $y$ 次修改之前的 $\leq \sqrt n$ 的 $add$ ，然后把答案累加到第 $id$ 个查询上，最后做不出来，自闭，看了 $TJ$ 才发现自己没有发现修改的周期性，如果发现了说不定就真的做出来了……     

# Ynoi [不归之人与望眼欲穿的人](https://www.luogu.com.cn/problem/P5065)      

也许是分块？考虑最短的区间具备的性质，假设 $[l,r]$ 就是我们最短的区间，那么 $a_{l - 1}$ 与 $a_{r + 1}$ 一定是所有位都重复了或者对答案没贡献？       

考虑尺取，考虑分块优化，再来个前缀和后缀和加二分，完，复杂度 $O(n\sqrt nlog_alog_a)$ 。     

艹算了一下时间复杂度，过不了，死了。      

点开题解，cow，果然还是找少了性质吗？        

# Ynoi [Yuno loves sqrt technology III](https://www.luogu.com.cn/problem/P5048)     

会回滚莫队，然后就什么都不会了。             

期间有想过分块但是不会判断。          

最后完全不行了就爬了。

# Ynoi [[Ynoi2015] 盼君勿忘](https://www.luogu.com.cn/problem/P5072)      

知道是莫队 + 光速幂于是跑来做了做。        

很快啊，就把题读错了，浪费了很多时间。        

把题目改过来了就好像很多了，很明显肯定要分每个值得贡献，而这玩意儿简单排列组合解决就可以了。       

然后就发现这个玩意儿肯定可以变化一下变量啊，然后就找到一个 $\sqrt n$ 查询，莫队性质下查询 $\sqrt n$ 是不会冲突的，Nice！！！        

然后光速幂的地方稍微有点没想清楚，还是翻了翻题解才发现这个地方把阈值换成根号就好了……人有点旷。       

# Ynoi [[Ynoi2017] 由乃的 OJ](https://www.luogu.com.cn/problem/P5354)       

无意间找到的，发现就是起床困难综合症上树。            

最开始的想法是一个 $O(n \sqrt n \log_n)$ 的树分块，这个应该很好想，而且在一定情况下可以去 $log$ ，不过很可惜被一个修改叉掉了（我不会带修树分块只会最简单的……）         

接着去试探了神仙 LYC 知道了是树剖加线段树，然后胡了一个小下午大概想到可以维护一个区间全是1或全是0的一个数走过去的结果但不会 $O(1)$ 转移，很尴尬。          

最后实在搞不出来去问 LYC 但是实在没听懂……翻了翻题解才发现原来分类讨论可以做……淦。           

不过应该是做了这么多 Ynoi 里面完成度比较高的……可能确实是题比较简单吧。       

# Ynoi [[Ynoi2015] 此时此刻的光辉](https://www.luogu.com.cn/problem/P5071)      

$dX$ 的 3 分题，果然这就是神仙嘴里的秒切吧。          

拿到这道题，这不就是 [CF1422F](https://www.luogu.com.cn/problem/CF1422F) 的进阶版吗？现在开始严重怀疑这场 CF 的出题人是不是也是 Ynoi 爱好者，毕竟这个阈值分治在质因数分解上的 trick 还算比较不常见吧。          

搞完后发现自己还是不会怎么快速分解质因数，就去翻了翻讨论区，原来要用 Pollard-rho……不过又跑去问了问 LYC 才知道这道题原来可以直接质因数分解。          

然后很快啊，一个 $O(14n\sqrt n )$ 就随便搞搞出来了，不过又翻了翻讨论区发现这个玩意儿还是会被卡(如果在考场上的话早就开始码了)                      

接着就想了比较久，感觉莫队这个查询特性还没用上，突然发现我们可以在阈值分治一下，就可以把常数压下来，一个前缀和预处理一下，玩进查询特性里，这道题就滚完了！！！          

# Ynoi [P7446 [Ynoi2007] rfplca](https://www.luogu.com.cn/problem/P7446)       

~~其实根号次后跳出块的性质是不经意间瞥讨论看到的~~         

弹飞绵羊一套，结果后面又推了个性质：如果有元素被改成了 1 我们才整体重构，否则就直接减，不过这个代码不是很好写至少我写了一下午都没写出来。             

这个思路其实还是比较简单，真就把弹飞绵羊往上面套，所以不浪费笔墨赘述了。      

# Ynoi [P5063 [Ynoi2014] 置身天上之森](https://www.luogu.com.cn/problem/P5063)         

不知道是个什么时间复杂度，所以就直接看了一下底下的时间复杂度提醒很确信分块了起来。           

接着就感觉这玩意儿就是序列上的区间rank区间加加强版，又观察到执行查询操作和修改操作都是在每层的连续点上面爬询问爬修改，于是就直接尝试每层分块了一下接着就做出来了。          

唯一比较遗憾的就是对于两边点的单独修改，这个只能平衡一下把块长调到 $\sqrt n$ 不然要被卡常成狗，所以到现在我还是不知道为什么理论时间复杂度 $O(n \sqrt {nlogn})$ 跑不过理论时间复杂度 $O(n \sqrt n logn)$ ，难道就是这个操作太费时间了？      

# Ynoi [P5527 [Ynoi2012] NOIP2016 人生巅峰](https://www.luogu.com.cn/problem/P5527)       

刚开始的时候还有点胡，接着就感觉查询1很熟悉，题目瞬间[圣剑护符](https://www.luogu.com.cn/problem/P5556)了起来，然后 10min 解决查询问题。         

接着就发觉这 $v$ 很小，然后还是不清楚该怎么区间修改，还去群里问了一下 fyy 扩欧直接被 D 爆了。          

后来瞟了一下题解有没有简单做法一看到倍增字眼就瞬间懂王了……我真的是脑抽。        

# Ynoi [P6778 [Ynoi2009] rpdq](https://www.luogu.com.cn/problem/P6778)       

因为当成了top cluster树分块的模板来做，所以此题没有思路。（      

# Ynoi [P5610 [Ynoi2013] 大学](https://www.luogu.com.cn/problem/P5610)              

刚开始的时候就大概想到了值域小然后所有数执行修改操作的数量是上限的 $O(n \log n)$ ，然后只要每次找到这些数就可以单点修改了。由于查询是区间和所以就直接上树状数组就好了，感觉很水（                

然后很快就自闭了，中间这个部分完全写不来啊，可以先来个 $O(n \sqrt a)$ 开 vector 把每个数对应有哪些因数都给搞出来，但是这之后呢？怎么 vector $O(1)$ 删啊，难不成还要开个链表？可是这样你查询区间的时候又怎么二分左右端点啊……到最后都搞不动索性就弃了看题解，于是就学到了一个并查集维护序列只删不加的 trick，就差一点点了啊……            
# Ynoi [P5528 [Ynoi2012] WC, THUWC, CTSC 与 APIO2017](https://www.luogu.com.cn/problem/P7710)              

由于和自己之前出的一道题目很像，然后就顺着这个思路继续维护。                   

很快就大概想到了得用一维 bfs 序然后一维 dfn 序，然后直接变化一下原树变成一个每层 dfn 序都是单调上升的树。                                   

接着感觉操作 1 很像初始化就直接根号分治了，一看查询是单点查询，很快啊~~这就是明示差分对吧~~，于是考虑阈值内每个块开二维数组存修改的 sum ，阈值外直接再来个序列打标记就好了，最后答案就是两个序列上的答案之和，不过时间复杂度莫名炸到了 $O(n \sqrt n \log n)$ ，不过调调阈值就 $O(n \sqrt {n \log n})$ 了。                   

然后开始码码码，码完一交全 MLE 了……                   

想了一会儿发现答案具有累加性，然后直接单块滚空间就过了，真就一道题卡了一堆 trick 呗……                 

不过正解貌似简单很多，有 CDQ 的也有直接分块就 $O(n \sqrt n)$ 了不是很明白，不过我感觉时间 $O(m \sqrt {n \log n})$ ，空间 $O(n \log n)$ 的做法已经很优秀了（                       

# Ynoi [P6779 [Ynoi2009] rla1rmdq](https://www.luogu.com.cn/problem/P6779)     

刚开始的时候瞎想一堆，什么块内根号分治，块内前置状态继承一堆 trick 都用上了，结果全是 $O((\sqrt n) ^ 4)$ 的 SB 东西，回到家才发现好像可以把每个块都共用一个 vis 然后一起爬树貌似就是单块均摊 $O(n)$ 了，接着就想到用并查集维护题解里面讲的东西后就开始码了，真的难调/tuu 。      
# Ynoi [[Ynoi2010] y-fast trie](https://www.luogu.com.cn/problem/P6105)     

感觉 5min 就会了一大半（（（（（           

最后因为脑瘫了没发现一个 SB 的重要性质就没了，不得不说思维难度全 Ynoi 最低无疑了。         

# Ynoi [P5398 [Ynoi2018] GOSICK](https://www.luogu.com.cn/problem/P5398)          

其实 5min 就会了一大部分的根号分治内容，但是比较可惜的是最难的一步没转化过来最后还是没有自己独立切掉本命题/tuu               

最后都还是在 5min 推出了的根号分治内容上面原地踏步，不得不说还是没关注到二离莫队的一些特性，对于其本质理解的远远不够！！！      

~~其实也不是很难，但是也没有简单到秒切吧一群骗子。~~

但愿世上所有金发的洋娃娃都能遇上属于自己的黑色死神。   
# Ynoi [P4692 [Ynoi2016] 谁的梦](https://www.luogu.com.cn/problem/P4692)    

刚开始的时候想复杂了，正着算大概会了于是就开题解准备拍一下，结果看到了容斥后立马关掉改了一下瞬间发现简单了好多！！！          

然而一次操作 $50$ 多只 $\log$ 我也为此感到很恶心。        

# Ynoi [P5313 [Ynoi2011] WBLT](https://www.luogu.com.cn/problem/P5313)         

很久以前想的时候没有想到 bitset ，（那时候一直坚信这道题是分块根号分治）现在在提示 bitset 的情况下想发现好想多了，甚至感觉很显然？（               

最开始的想法就是先维护一下 bitset ，查询时直接按公差分块再与起来即可，然后想了很久都没有更优秀的做法了就开了题解，好家伙还真是这个解法。               

然后感觉小于 $w$ 的可以直接维护，后来才发现可以直接拆询问跑貌似才应该更快，毕竟查询的时间复杂度固定不管莫队是 $O(n \sqrt m)$ 的，所以这时候拆 $m$ 理论才是最快的。         

难点在于怎么快速拆 bitset。      

# Ynoi [P7447 [Ynoi2007] rgxsxrs](https://www.luogu.com.cn/problem/P7447)       

打月赛的时候就看了，没看值域前狂喜√             

忘了中间想了些什么奇奇怪怪的东西，总之也没有对，貌似是看了题解才知道还可以倍增分块……